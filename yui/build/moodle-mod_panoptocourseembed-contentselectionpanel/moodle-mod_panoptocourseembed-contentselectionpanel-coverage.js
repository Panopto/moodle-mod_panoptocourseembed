
var __cov_7HJ$eEkJDUztqi2qj8X_UQ = (Function('return this'))();
if (!__cov_7HJ$eEkJDUztqi2qj8X_UQ.__coverage__) { __cov_7HJ$eEkJDUztqi2qj8X_UQ.__coverage__ = {}; }
__cov_7HJ$eEkJDUztqi2qj8X_UQ = __cov_7HJ$eEkJDUztqi2qj8X_UQ.__coverage__;
if (!(__cov_7HJ$eEkJDUztqi2qj8X_UQ['build/moodle-mod_panoptocourseembed-contentselectionpanel/moodle-mod_panoptocourseembed-contentselectionpanel.js'])) {
   __cov_7HJ$eEkJDUztqi2qj8X_UQ['build/moodle-mod_panoptocourseembed-contentselectionpanel/moodle-mod_panoptocourseembed-contentselectionpanel.js'] = {"path":"build/moodle-mod_panoptocourseembed-contentselectionpanel/moodle-mod_panoptocourseembed-contentselectionpanel.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},"b":{"1":[0,0],"2":[0,0,0,0,0,0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":63},"end":{"line":1,"column":82}}},"2":{"name":"(anonymous_2)","line":30,"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":46}}},"3":{"name":"(anonymous_3)","line":43,"loc":{"start":{"line":43,"column":11},"end":{"line":43,"column":28}}},"4":{"name":"(anonymous_4)","line":62,"loc":{"start":{"line":62,"column":38},"end":{"line":62,"column":54}}},"5":{"name":"(anonymous_5)","line":63,"loc":{"start":{"line":63,"column":19},"end":{"line":63,"column":31}}},"6":{"name":"(anonymous_6)","line":74,"loc":{"start":{"line":74,"column":34},"end":{"line":74,"column":66}}},"7":{"name":"(anonymous_7)","line":92,"loc":{"start":{"line":92,"column":34},"end":{"line":92,"column":66}}},"8":{"name":"(anonymous_8)","line":110,"loc":{"start":{"line":110,"column":26},"end":{"line":110,"column":47}}},"9":{"name":"(anonymous_9)","line":178,"loc":{"start":{"line":178,"column":53},"end":{"line":178,"column":70}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":182,"column":108}},"2":{"start":{"line":30,"column":0},"end":{"line":32,"column":2}},"3":{"start":{"line":31,"column":4},"end":{"line":31,"column":79}},"4":{"start":{"line":34,"column":0},"end":{"line":169,"column":3}},"5":{"start":{"line":45,"column":8},"end":{"line":53,"column":9}},"6":{"start":{"line":52,"column":12},"end":{"line":52,"column":19}},"7":{"start":{"line":55,"column":8},"end":{"line":55,"column":40}},"8":{"start":{"line":57,"column":8},"end":{"line":58,"column":63}},"9":{"start":{"line":59,"column":8},"end":{"line":59,"column":127}},"10":{"start":{"line":60,"column":8},"end":{"line":60,"column":106}},"11":{"start":{"line":62,"column":8},"end":{"line":66,"column":32}},"12":{"start":{"line":63,"column":12},"end":{"line":65,"column":14}},"13":{"start":{"line":64,"column":16},"end":{"line":64,"column":59}},"14":{"start":{"line":75,"column":8},"end":{"line":86,"column":11}},"15":{"start":{"line":88,"column":8},"end":{"line":88,"column":52}},"16":{"start":{"line":89,"column":8},"end":{"line":89,"column":103}},"17":{"start":{"line":93,"column":8},"end":{"line":99,"column":42}},"18":{"start":{"line":101,"column":8},"end":{"line":101,"column":67}},"19":{"start":{"line":102,"column":8},"end":{"line":102,"column":61}},"20":{"start":{"line":104,"column":8},"end":{"line":104,"column":103}},"21":{"start":{"line":106,"column":8},"end":{"line":106,"column":63}},"22":{"start":{"line":107,"column":8},"end":{"line":107,"column":58}},"23":{"start":{"line":112,"column":8},"end":{"line":114,"column":21}},"24":{"start":{"line":117,"column":8},"end":{"line":117,"column":51}},"25":{"start":{"line":118,"column":8},"end":{"line":118,"column":77}},"26":{"start":{"line":119,"column":8},"end":{"line":119,"column":70}},"27":{"start":{"line":120,"column":8},"end":{"line":120,"column":74}},"28":{"start":{"line":123,"column":8},"end":{"line":123,"column":59}},"29":{"start":{"line":125,"column":8},"end":{"line":128,"column":88}},"30":{"start":{"line":130,"column":8},"end":{"line":130,"column":67}},"31":{"start":{"line":131,"column":8},"end":{"line":131,"column":61}},"32":{"start":{"line":133,"column":8},"end":{"line":133,"column":104}},"33":{"start":{"line":135,"column":8},"end":{"line":135,"column":60}},"34":{"start":{"line":136,"column":8},"end":{"line":136,"column":61}},"35":{"start":{"line":137,"column":8},"end":{"line":137,"column":46}},"36":{"start":{"line":171,"column":0},"end":{"line":171,"column":58}},"37":{"start":{"line":178,"column":0},"end":{"line":180,"column":2}},"38":{"start":{"line":179,"column":4},"end":{"line":179,"column":52}}},"branchMap":{"1":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]},"2":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":12},"end":{"line":45,"column":42}},{"start":{"line":46,"column":12},"end":{"line":46,"column":41}},{"start":{"line":47,"column":12},"end":{"line":47,"column":42}},{"start":{"line":48,"column":12},"end":{"line":48,"column":39}},{"start":{"line":49,"column":13},"end":{"line":49,"column":35}},{"start":{"line":50,"column":13},"end":{"line":50,"column":33}},{"start":{"line":51,"column":13},"end":{"line":51,"column":32}}]},"3":{"line":171,"type":"binary-expr","locations":[{"start":{"line":171,"column":27},"end":{"line":171,"column":51}},{"start":{"line":171,"column":55},"end":{"line":171,"column":57}}]}},"code":["(function () { YUI.add('moodle-mod_panoptocourseembed-contentselectionpanel', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/","//","// Moodle is free software: you can redistribute it and/or modify","// it under the terms of the GNU General Public License as published by","// the Free Software Foundation, either version 3 of the License, or","// (at your option) any later version.","//","// Moodle is distributed in the hope that it will be useful,","// but WITHOUT ANY WARRANTY; without even the implied warranty of","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","// GNU General Public License for more details.","//","// You should have received a copy of the GNU General Public License","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.","","/**"," * YUI module for displaying an LTI launch within a YUI panel."," *"," * @package mod_panoptocurseembed"," * @copyright  Panopto 2021"," * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later"," */","","/**"," * This panel will create the Panopto LTI embed window and update the content selection buttons on view.php once a session is selected."," * @method PANOPTOCONTENTSELECTIONFRAME"," */","var PANOPTOCONTENTSELECTIONFRAME = function() {","    PANOPTOCONTENTSELECTIONFRAME.superclass.constructor.apply(this, arguments);","};","","Y.extend(PANOPTOCONTENTSELECTIONFRAME, Y.Base, {","","    courseid: null,","","    /**","     * Init function for the checkboxselection module","     * @property params","     * @type {Object}","     */","    init : function(params) {","        // Check to make sure parameters are initialized","        if ('0' === params.folderviewbtnid || ","            '0' === params.selectvidbtnid || ","            '0' === params.lticimlaunchurl|| ","            '0' === params.ltilaunchurl ||","             0  === params.courseid || ","             0  === params.height || ","             0  === params.width) {","            return;","        }","","        this.courseid = params.courseid;","","        var selectvidbtn = Y.one('#' + params.selectvidbtnid),","           folderviewbtn = Y.one('#' + params.folderviewbtnid);","        selectvidbtn.on('click', this.open_panopto_window_callback, this, params.lticimlaunchurl, params.height, params.width);","        folderviewbtn.on('click', this.panopto_folder_view_callback, this, params.ltilaunchurl, 600, 800);","","        this._createResourceLinkId = (function (base) {","            return function () {","                return base + '_' + (new Date()).getTime();","            };","        }(params.resourcebase));","    },","","    /**","     * Event handler callback for when the panel content is changed","     * @property e","     * @type {Object}","     */","    open_panopto_window_callback: function(e, url, height, width) {","        var panoptoWindow = new M.core.dialogue({","            bodyContent: '<iframe src=\"' + url + '\" width=\"100%\" height=\"100%\"></iframe>',","            headerContent: M.util.get_string('selectvideo', 'panoptocourseembed'),","            width: width,","            height: height,","            draggable: false,","            visible: true,","            zindex: 100,","            modal: true,","            focusOnPreviousTargetAfterHide: true,","            render: true","        });","","        document.body.panoptoWindow = panoptoWindow;","        document.body.addEventListener('sessionSelected', this.close_popup_callback.bind(this), false);","    },","","    panopto_folder_view_callback: function(e, url, height, width) {// Update the iframe element attributes and sec to point to correct content.","        var newContentSource = new URL(url),","        newIntro = '<p><iframe src=\"' + newContentSource.toString() + '\"' +","                       ' style=\"width:100%;' +","                               ' height:100%;' + ","                               ' min-width:'+ width + 'px;' +","                               ' min-height:' + height + 'px;\">' +","                    '</iframe><br /></p>';","        ","        Y.one('input[name=intro]').setAttribute('value', newIntro);","        Y.one('#panopto-intro-preview').setContent(newIntro);","","        Y.one('#id_select_video').set('value', M.util.get_string('selectvideo', 'panoptocourseembed'));","        // Update button classes.","        Y.one('#id_select_video').removeClass('btn-secondary');","        Y.one('#id_select_video').addClass('btn-primary');","    },","","    close_popup_callback: function(closeEvent) {","        // Update the iframe element attributes and sec to point to correct content.","        var newContentSource = new URL(closeEvent.detail.ltiViewerUrl),","            search_params = newContentSource.searchParams,","            newIntro;","","        // This will encode the params so decode the json once to make sure it is not double encoded.","        search_params.set('course', this.courseid);","        search_params.set('custom', decodeURI(closeEvent.detail.customData));","        search_params.set('contentUrl', closeEvent.detail.contentUrl);","        search_params.set('resourcelinkid', this._createResourceLinkId());","","        // change the search property of the main url","        newContentSource.search = search_params.toString();","","        newIntro = '<p><h1>' + closeEvent.detail.title + '</h1>' +","                     '<iframe src=\"' + newContentSource.toString() + '\"' +","                          ' width=\"' + closeEvent.detail.width + '\"' +","                         ' height=\"' + closeEvent.detail.height + '\"></iframe><br></p>';","","        Y.one('input[name=intro]').setAttribute('value', newIntro);","        Y.one('#panopto-intro-preview').setContent(newIntro);","","        Y.one('#id_select_video').set('value', M.util.get_string('replacevideo', 'panoptocourseembed'));","        // Update button classes.","        Y.one('#id_select_video').addClass('btn-secondary');","        Y.one('#id_select_video').removeClass('btn-primary');","        document.body.panoptoWindow.destroy();","    },","","},","{","    NAME : 'moodle-mod_panoptocourseembed-contentselectionpanel',","    ATTRS : {","        selectvidbtnid : {","            value: '0'","        },","        folderviewbtnid : {","            value: '0'","        },","        lticimlaunchurl : {","            value: '0'","        },","        ltilaunchurl : {","            value: '0'","        },","        height : {","            value: 0","        },","        width : {","            value: 0","        },","        courseid : {","            value: 0","        },","        resourcebase : {","            value: '0'","        }","    }","});","","M.mod_panoptocourseembed = M.mod_panoptocourseembed || {};","","/**"," * Entry point for PANOPTOCONTENTSELECTIONFRAME module"," * @param string params additional parameters."," * @return object the panopto course embed object"," */","M.mod_panoptocourseembed.initcontentselectionpanel = function(params) {","    return new PANOPTOCONTENTSELECTIONFRAME(params);","};","","}, '@VERSION@', {\"requires\": [\"base\", \"node\", \"panel\", \"moodle-core-notification\", \"node-event-simulate\"]});","","}());"]};
}
__cov_7HJ$eEkJDUztqi2qj8X_UQ = __cov_7HJ$eEkJDUztqi2qj8X_UQ['build/moodle-mod_panoptocourseembed-contentselectionpanel/moodle-mod_panoptocourseembed-contentselectionpanel.js'];
__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['1']++;YUI.add('moodle-mod_panoptocourseembed-contentselectionpanel',function(Y,NAME){__cov_7HJ$eEkJDUztqi2qj8X_UQ.f['1']++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['2']++;var PANOPTOCONTENTSELECTIONFRAME=function(){__cov_7HJ$eEkJDUztqi2qj8X_UQ.f['2']++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['3']++;PANOPTOCONTENTSELECTIONFRAME.superclass.constructor.apply(this,arguments);};__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['4']++;Y.extend(PANOPTOCONTENTSELECTIONFRAME,Y.Base,{courseid:null,init:function(params){__cov_7HJ$eEkJDUztqi2qj8X_UQ.f['3']++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['5']++;if((__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['2'][0]++,'0'===params.folderviewbtnid)||(__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['2'][1]++,'0'===params.selectvidbtnid)||(__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['2'][2]++,'0'===params.lticimlaunchurl)||(__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['2'][3]++,'0'===params.ltilaunchurl)||(__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['2'][4]++,0===params.courseid)||(__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['2'][5]++,0===params.height)||(__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['2'][6]++,0===params.width)){__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['1'][0]++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['6']++;return;}else{__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['1'][1]++;}__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['7']++;this.courseid=params.courseid;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['8']++;var selectvidbtn=Y.one('#'+params.selectvidbtnid),folderviewbtn=Y.one('#'+params.folderviewbtnid);__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['9']++;selectvidbtn.on('click',this.open_panopto_window_callback,this,params.lticimlaunchurl,params.height,params.width);__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['10']++;folderviewbtn.on('click',this.panopto_folder_view_callback,this,params.ltilaunchurl,600,800);__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['11']++;this._createResourceLinkId=function(base){__cov_7HJ$eEkJDUztqi2qj8X_UQ.f['4']++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['12']++;return function(){__cov_7HJ$eEkJDUztqi2qj8X_UQ.f['5']++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['13']++;return base+'_'+new Date().getTime();};}(params.resourcebase);},open_panopto_window_callback:function(e,url,height,width){__cov_7HJ$eEkJDUztqi2qj8X_UQ.f['6']++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['14']++;var panoptoWindow=new M.core.dialogue({bodyContent:'<iframe src="'+url+'" width="100%" height="100%"></iframe>',headerContent:M.util.get_string('selectvideo','panoptocourseembed'),width:width,height:height,draggable:false,visible:true,zindex:100,modal:true,focusOnPreviousTargetAfterHide:true,render:true});__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['15']++;document.body.panoptoWindow=panoptoWindow;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['16']++;document.body.addEventListener('sessionSelected',this.close_popup_callback.bind(this),false);},panopto_folder_view_callback:function(e,url,height,width){__cov_7HJ$eEkJDUztqi2qj8X_UQ.f['7']++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['17']++;var newContentSource=new URL(url),newIntro='<p><iframe src="'+newContentSource.toString()+'"'+' style="width:100%;'+' height:100%;'+' min-width:'+width+'px;'+' min-height:'+height+'px;">'+'</iframe><br /></p>';__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['18']++;Y.one('input[name=intro]').setAttribute('value',newIntro);__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['19']++;Y.one('#panopto-intro-preview').setContent(newIntro);__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['20']++;Y.one('#id_select_video').set('value',M.util.get_string('selectvideo','panoptocourseembed'));__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['21']++;Y.one('#id_select_video').removeClass('btn-secondary');__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['22']++;Y.one('#id_select_video').addClass('btn-primary');},close_popup_callback:function(closeEvent){__cov_7HJ$eEkJDUztqi2qj8X_UQ.f['8']++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['23']++;var newContentSource=new URL(closeEvent.detail.ltiViewerUrl),search_params=newContentSource.searchParams,newIntro;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['24']++;search_params.set('course',this.courseid);__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['25']++;search_params.set('custom',decodeURI(closeEvent.detail.customData));__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['26']++;search_params.set('contentUrl',closeEvent.detail.contentUrl);__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['27']++;search_params.set('resourcelinkid',this._createResourceLinkId());__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['28']++;newContentSource.search=search_params.toString();__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['29']++;newIntro='<p><h1>'+closeEvent.detail.title+'</h1>'+'<iframe src="'+newContentSource.toString()+'"'+' width="'+closeEvent.detail.width+'"'+' height="'+closeEvent.detail.height+'"></iframe><br></p>';__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['30']++;Y.one('input[name=intro]').setAttribute('value',newIntro);__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['31']++;Y.one('#panopto-intro-preview').setContent(newIntro);__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['32']++;Y.one('#id_select_video').set('value',M.util.get_string('replacevideo','panoptocourseembed'));__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['33']++;Y.one('#id_select_video').addClass('btn-secondary');__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['34']++;Y.one('#id_select_video').removeClass('btn-primary');__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['35']++;document.body.panoptoWindow.destroy();}},{NAME:'moodle-mod_panoptocourseembed-contentselectionpanel',ATTRS:{selectvidbtnid:{value:'0'},folderviewbtnid:{value:'0'},lticimlaunchurl:{value:'0'},ltilaunchurl:{value:'0'},height:{value:0},width:{value:0},courseid:{value:0},resourcebase:{value:'0'}}});__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['36']++;M.mod_panoptocourseembed=(__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['3'][0]++,M.mod_panoptocourseembed)||(__cov_7HJ$eEkJDUztqi2qj8X_UQ.b['3'][1]++,{});__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['37']++;M.mod_panoptocourseembed.initcontentselectionpanel=function(params){__cov_7HJ$eEkJDUztqi2qj8X_UQ.f['9']++;__cov_7HJ$eEkJDUztqi2qj8X_UQ.s['38']++;return new PANOPTOCONTENTSELECTIONFRAME(params);};},'@VERSION@',{'requires':['base','node','panel','moodle-core-notification','node-event-simulate']});
